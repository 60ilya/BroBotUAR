import logging
from aiogram import Router, types, F, Bot
from aiogram.fsm.state import State, StatesGroup
from aiogram.fsm.context import FSMContext
from config import Config
from db import Database
from keyboards.inline import transport_menu_ikb, transport_catalog_ikb, transport_partners_ikb, transport_agregator_ikb, back_start_menu, transport_request_ikb

router = Router()
db = Database()

class TransportStates(StatesGroup):
    waiting_for_transport_data = State() 

@router.callback_query(F.data == 'transport')
async def transport_menu(callback: types.CallbackQuery):
    
    text = """
üöó –ò—â–∏—Ç–µ –º–∞—à–∏–Ω—É –≤ –ö–µ–π–ø—Ç–∞—É–Ω–µ?
–£ –º–µ–Ω—è —Å–æ–±—Ä–∞–Ω–∞ –±–∞–∑–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ –∏ —Å–∫–∏–¥–∫–∞–º–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –ë—Ä–æ –ë–æ—Ç–∞

üí° –ë—Ä–æ–Ω–∏—Ä—É—è —á–µ—Ä–µ–∑ –º–µ–Ω—è, –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–∫–∏–¥–∫—É –Ω–∞ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –∞—Ä–µ–Ω–¥—ã:
<b>‚Ä¢¬†3% —Å–∫–∏–¥–∫–∞</b>¬†(–ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ –¥–æ 15 –¥–Ω–µ–π)
<b>‚Ä¢¬†5% —Å–∫–∏–¥–∫–∞</b>¬†(–ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ –æ—Ç 15 –¥–Ω–µ–π –¥–æ 1 –º–µ—Å—è—Ü–∞)
<b>‚Ä¢ 6% —Å–∫–∏–¥–∫–∞</b> –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –∞—Ä–µ–Ω–¥—É (–æ—Ç 2 –º–µ—Å—è—Ü–µ–≤)
<b>‚Ä¢¬†5% —Å–∫–∏–¥–∫–∞</b>¬†–ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞—Ä–µ–Ω–¥–µ –æ—Ç –º–µ–Ω—è (–º–∏–Ω–∏–º—É–º 3 –¥–Ω—è)

–í—Å—ë –ø—Ä–æ—Å—Ç–æ: –≤—ã–±–µ—Ä–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –º–∞—à–∏–Ω—É –∏ –æ—Ñ–æ—Ä–º–∏ –±—Ä–æ–Ω—å üëá

<i>*–°–∫–∏–¥–∫–∞ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å–æ —Å–∫–∏–¥–∫–æ–π –ø–∞—Ä—Ç–Ω–µ—Ä–∞</i>"""

    
    await callback.message.edit_text(
        text,
        reply_markup=transport_menu_ikb(),
        parse_mode="HTML"
    )
    
@router.callback_query(F.data == 'transport_catalog')
async def transport_catalog(callback: types.CallbackQuery):
    
    text = """
<b>–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ —Ä—ã–Ω–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Ç—É—Ç –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∞—Ä–µ–Ω–¥—ã:</b>

1Ô∏è‚É£ –ß–µ—Ä–µ–∑ —Å–∞–π—Ç-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä
–ú–æ–∂–Ω–æ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –∞–≤—Ç–æ –Ω–∞ –∫—Ä—É–ø–Ω—ã—Ö –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä,¬†<i>Europcar,¬†Woodford,¬†Tempest,¬†Pace Car Hire</i>¬†–∏ –¥—Ä—É–≥–∏—Ö.

üí∞¬†–¶–µ–Ω—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –æ—Ç R250 –≤ —Å—É—Ç–∫–∏, –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —á–∞—Å—Ç–æ –Ω–∏–∂–µ, —á–µ–º —É –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–∫–∞—Ç—á–∏–∫–æ–≤.

üí≥ –û–ø–ª–∞—Ç–∞ ‚Äî¬†—Ç–æ–ª—å–∫–æ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ–π, —É—Å–ª–æ–≤–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ —É–∫–∞–∑–∞–Ω—ã –Ω–∞ —Å–∞–º–æ–º —Å–∞–π—Ç–µ, –µ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏, –≥–¥–µ –¥–µ–±–µ—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –æ—Ç–ª–∏—á–Ω–æ –ø—Ä–æ–∫–∞—Ç—ã–≤–∞–µ—Ç –∑–∞ –∫—Ä–µ–¥–∏—Ç–Ω—É—é, –Ω–æ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å
 
‚ö†Ô∏è –ò–º–µ–π –≤ –≤–∏–¥—É:
‚Ä¢ –≤–æ–∑–º–æ–∂–Ω—ã¬†<b>–∑–∞–¥–µ—Ä–∂–∫–∏</b> —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –¥–µ–ø–æ–∑–∏—Ç–∞¬†(–∏–Ω–æ–≥–¥–∞ –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–µ–¥–µ–ª—å);
‚Ä¢ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç¬†—Ç–æ–ª—å–∫–æ <b>–ø–æ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ</b>;
‚Ä¢ –∏ –Ω–µ –≤—Å–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–∞–ª–∏—á–Ω—ã–µ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äî¬†<i>Woodford, Tempest,¬†Pace Car Hire</i>, –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Å –∫—ç—à–µ–º).

–ï—Å–ª–∏ –≤–∞–∂–Ω–æ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –±–µ–∑ –∫–∞—Ä—Ç—ã –∏–ª–∏ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç–æ–π ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç ‚Ññ2: –∞—Ä–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ –º–µ—Å—Ç–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤.

2Ô∏è‚É£ <b>–ß–µ—Ä–µ–∑ –º–µ—Å—Ç–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤</b>¬†
–ó–∞ –ø—Ä–æ—à–ª—ã–π –≥–æ–¥, @adelsuprun —Å–æ–±—Ä–∞–ª–∞ –Ω–µ–±–æ–ª—å—à—É—é –±–∞–∑—É –Ω–∞–¥–µ–∂–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Ç–µ –∫—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–µ–ø–æ–∑–∏—Ç—ã –∏ —Å–ª–µ–¥—è—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è —Å–µ—Ä–≤–∏—Å –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π –∞—Ä–µ–Ω–¥—ã

<i>üí°¬†–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä–µ–Ω–¥—ã —á–µ—Ä–µ–∑ –ë—Ä–æ –ë–æ—Ç–∞:</i>
‚Ä¢ —Å–∫–∏–¥–∫–∏ –¥–æ¬†5%¬†–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ä–æ–∫–∞ –∞—Ä–µ–Ω–¥—ã
‚Ä¢ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—â–µ–Ω–∏—è —Å¬†—Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–º–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏
‚Ä¢ –ø–æ–º–æ—â—å –≤ –ø–æ–¥–±–æ—Ä–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –ø–æ–¥ –¥–∞—Ç—ã –∏ –±—é–¥–∂–µ—Ç
‚Ä¢ –≥–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è ‚Äî –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–æ–º–∏—Å—Å–∏–π

–ß–µ–º —Ä–∞–Ω—å—à–µ –±—Ä–æ–Ω–∏—Ä—É–µ—Ç–µ, —Ç–µ–º –±–æ–ª—å—à–µ –≤—ã–±–æ—Ä!"""

    
    await callback.message.edit_text(
        text,
        reply_markup=transport_catalog_ikb(),
        parse_mode="HTML"
    )

@router.callback_query(F.data == 'transport_agregator')
async def transport_agregator(callback: types.CallbackQuery):
    
    text = """
<b>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —á–µ—Ä–µ–∑ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä</b>
–Ω—É–∂–Ω–∞ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–∞—è –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ë—Ä–æ–Ω–∏—Ä—É—è –ø–æ —ç—Ç–∏–º —Ä–µ—Ñ. —Å—Å—ã–ª–∫–∞–º, –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –≤–∫–ª–∞–¥ –≤ —Ä–∞–±–æ—Ç—É <b>Bro Bota</b>"""

    
    await callback.message.edit_text(
        text,
        reply_markup=transport_agregator_ikb(),
        parse_mode="HTML"
    )

@router.callback_query(F.data == 'transport_partners')
async def transport_agregator(callback: types.CallbackQuery):
    
    text = """
–í—ã–±–∏—Ä–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–ª—è –≤–∞—Å —É—Å–ª–æ–≤–∏—è –∏ –±—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å

<b>–ü–∞—Ä—Ç–Ω–µ—Ä 1 - –í—è—á–µ—Å–ª–∞–≤ - —Å–¥–∞—á–∞ –æ—Ç 3—Ö —Å—É—Ç–æ–∫
–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã:</b>
- –û—Ç 200–∫–º/—Å—É—Ç–∫–∏
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å (–∫—Ä–æ–º–µ —à–∏–Ω) 
- –û—Ç 7 –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è 
- –î–µ–ø–æ–∑–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ —Å—Ä–∞–∑—É —Å –æ–≥–æ–≤–æ—Ä–∫–æ–π –¥–æ 5 –¥–Ω–µ–π 
- –û–ø–ª–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è: RUB (–ø–µ—Ä–µ–≤–æ–¥), USD, EUR, USDT –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–∞—Å –º–µ—Ç–æ–¥–æ–º
- –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ <b>10%</b> –æ—Ç —Å—É–º–º—ã –∞—Ä–µ–Ω–¥—ã (–æ—Å—Ç–∞—Ç–æ–∫ —Å—É–º–º—ã –≤–Ω–æ—Å–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å–º–æ—Ç—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã)

<i>*–í —Å–ª—É—á–∞–µ –∞–≤–∞—Ä–∏–∏ –¥–µ–ø–æ–∑–∏—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, –≤—Å–µ —á—Ç–æ —Å–≤—ã—à–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è</i>

–ü—Ä–∏ –î–¢–ü —Å—Ä–∞–∑—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–≤–æ–Ω–∏—Ç—å –í—è—á–µ—Å–ª–∞–≤—É 


<b>–ü–∞—Ä—Ç–Ω–µ—Ä 2 - ART RENTAL CAR - —Å–¥–∞—á–∞ –æ—Ç 3—Ö —Å—É—Ç–æ–∫
–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã:</b> 
- –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –∫–º
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å (–∫—Ä–æ–º–µ —à–∏–Ω)
- –û—Ç 7 –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è 
- –î–µ–ø–æ–∑–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–¥–∞—á–∏ –∞–≤—Ç–æ(–≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ø—Ä–∏–¥–µ—Ç —à—Ç—Ä–∞—Ñ –≤—ã—à–ª—é—Ç –∫–≤–∏—Ç–∞–Ω—Ü–∏—é) 
- –û–ø–ª–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è: RUB (–ø–µ—Ä–µ–≤–æ–¥), USD, EUR, USDT –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–∞—Å –º–µ—Ç–æ–¥–æ–º
- –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ <b>10%</b> –æ—Ç —Å—É–º–º—ã –∞—Ä–µ–Ω–¥—ã (–æ—Å—Ç–∞—Ç–æ–∫ —Å—É–º–º—ã –≤–Ω–æ—Å–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å–º–æ—Ç—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã)

<i>*–í —Å–ª—É—á–∞–µ –∞–≤–∞—Ä–∏–∏ –¥–µ–ø–æ–∑–∏—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, –≤—Å–µ —á—Ç–æ —Å–≤—ã—à–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è</i>

–ü—Ä–∏ –î–¢–ü —Å—Ä–∞–∑—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–≤–æ–Ω–∏—Ç—å –ê—Ä—Ç—É—Ä—É
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—è—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—å —Ç–æ–≥–æ –∂–µ –∫–ª–∞—Å—Å–∞, –≤ —Å–ª—É—á–∞—è—Ö –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤


<b>–ü–∞—Ä—Ç–Ω–µ—Ä 3 - –ü–∞—É–ª—å –ö–∞–±—Ä–∏–æ–ª–µ—Ç—ã (—Å–∫–∏–¥–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—Ä–æ–Ω—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ @adelsuprun) - —Å–¥–∞—á–∞ –æ—Ç 3—Ö —Å—É—Ç–æ–∫
–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã: </b>
- –û—Ç 150–∫–º —Å—É—Ç–∫–∏ 
- –û—Ç 7 –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è 
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å (–∫—Ä–æ–º–µ —à–∏–Ω)
- –î–µ–ø–æ–∑–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–¥–∞—á–∏ –∞–≤—Ç–æ
- –û–ø–ª–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è: USD, EUR, ZAR (–æ–ø–ª–∞—Ç–∏—Ç—å –º–æ–∂–Ω–æ –∫–∞—Ä—Ç–æ–π –∏–ª–∏ –Ω–∞–ª–∏—á–Ω—ã–º–∏)
- –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ <b>10%</b> –æ—Ç —Å—É–º–º—ã –∞—Ä–µ–Ω–¥—ã (–æ—Å—Ç–∞—Ç–æ–∫ —Å—É–º–º—ã –≤–Ω–æ—Å–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å–º–æ—Ç—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã)
(–æ–ø–ª–∞—Ç–∏—Ç—å –º–æ–∂–Ω–æ RUB –∏–ª–∏ ZAR)

–ü—Ä–∏ –î–¢–ü —Å—Ä–∞–∑—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–≤–æ–Ω–∏—Ç—å –ü–∞—É–ª—é


<b>–ü–∞—Ä—Ç–Ω–µ—Ä 4 - –°–µ—Ä–≥–µ–π - –∞—Ä–µ–Ω–¥–∞ –≤ 5 –≥–æ—Ä–æ–¥–∞—Ö –ê—Ñ—Ä–∏–∫–∏
–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã:</b>
- –æ—Ç 150 –∫–º 
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (R100 - R200/—Å—É—Ç–∫–∏)
- –î–µ–ø–æ–∑–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç 5-10 –¥–Ω–µ–π 
- –û–ø–ª–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è: RUB, ZAR
- –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 5000 RUB (–æ—Å—Ç–∞—Ç–æ–∫ —Å—É–º–º—ã –≤–Ω–æ—Å–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å–º–æ—Ç—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã)
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—è—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—å —Ç–æ–≥–æ –∂–µ –∫–ª–∞—Å—Å–∞, –≤ —Å–ª—É—á–∞—è—Ö –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤

<b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è: </b>
- –ú–æ–π–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è R200 - R250 
- –í—Ç–æ—Ä–æ–π –≤–æ–¥–∏—Ç–µ–ª—å R50/–¥–µ–Ω—å 

<b>–ë–æ–ª–µ–µ —Ç–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –ø–∞—Ä—Ç–Ω–µ—Ä –ø–µ—Ä–µ–¥ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º</b>"""

    
    await callback.message.edit_text(
        text,
        reply_markup=transport_partners_ikb(),
        parse_mode="HTML"
    )

@router.callback_query(F.data.startswith('transport_partner_'))
async def transport_partner_request(callback: types.CallbackQuery, state: FSMContext):
    await state.set_state(TransportStates.waiting_for_transport_data)
    
    text = """
–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –æ—Ç–≤–µ—Ç –±–æ—Ç—É –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏. –ü–∞—Ä—Ç–Ω–µ—Ä —É–≤–∏–¥–∏—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É –∏ –≤—Å–∫–æ—Ä–µ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.
1. –¢–æ—á–Ω–∞—è –î–∞—Ç–∞ –∞—Ä–µ–Ω–¥—ã:¬†
2. –°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫:
3. –ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—é:¬†
4. –ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏:

<b>–ù–µ –∑–∞–±—É–¥—å—Ç–µ, –±—Ä–æ–Ω–∏—Ä—É—è –≤ Bro Bot —É –í–∞—Å —Å–∫–∏–¥–∫–∞ –Ω–∞ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –∞—Ä–µ–Ω–¥—ã!</b>"""

    await callback.message.edit_text(
        text,
        reply_markup=transport_request_ikb(),
        parse_mode="HTML"
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞—è–≤–∫–∏
@router.message(TransportStates.waiting_for_transport_data, F.text)
async def process_transport_data(message: types.Message, state: FSMContext, bot: Bot):
    transport_data = message.text
    user = message.from_user
    
    # –î–æ–±–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
    db.add_user(
        tg_id=user.id,
        username=user.username,
        full_name=user.full_name
    )
    
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ID
    user_db = db.get_user(user.id)
    
    if user_db:
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É –≤ –ë–î —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
        request_id = db.add_request(
            user_id=user_db['id'],
            request_type='transport',
            text=transport_data,
            duration_days=0
        )
        
        if request_id:
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º
            await notify_admins_about_new_transport(bot, transport_data, user, request_id)
            
            # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            await message.answer(
                f"‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.\n",
                reply_markup=back_start_menu()
            )
        else:
            await message.answer(
                "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
                reply_markup=back_start_menu()
            )
    else:
        await message.answer(
            "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
            reply_markup=back_start_menu()
        )
    
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    await state.clear()
    
async def notify_admins_about_new_transport(bot: Bot, transport_data: str, user: types.User, request_id: int):
    """–£–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –æ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–µ"""
    try:
        
        admin_text = (
            "üéâ <b>–ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –û–¢ –ë–û–¢–ê</b>\n\n"
            f"üë§ <b>–û—Ç:</b> {user.full_name}\n"
            f"üì± <b>Username:</b> @{user.username if user.username else '–Ω–µ—Ç'}\n"
            f"üÜî <b>User ID:</b> {user.id}\n"
            f"üìã <b>ID –∑–∞—è–≤–∫–∏:</b> #{request_id}\n"
            f"üìù <b>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏:</b>\n{transport_data}\n\n"
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º
        for admin_id in Config.ADMIN_IDS:
            try:
                await bot.send_message(
                    chat_id=admin_id,
                    text=admin_text,
                    parse_mode="HTML"
                )
            except Exception as e:
                logging.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞—Ä—Ç–Ω–µ—Ä—É {admin_id}: {e}")
                
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –≤ notify_admins_about_new_transport: {e}")